# Milesto PRD - v0.1（MVP: 单机闭环）

版本: v0.1
状态: Done
目标周期: 2-4 周（建议）

## 1. 迭代目标

- 做到“单机可用”的完整工作流闭环: 收集 -> 整理 -> 执行 -> 回顾。
- 让用户在不注册、不联网的情况下，也能稳定地管理任务。
- 用最少的功能组合，验证信息架构与核心交互是否正确。

## 2. 范围定义

### 2.1 In Scope（本迭代必须交付）

- 核心列表: Inbox / Today / Upcoming / Anytime / Someday / Logbook
- Projects + Tasks 归属
- Tags + 基础筛选
- 搜索
- 导入/导出（JSON）
- 任务排序（至少支持 Today 与项目内排序）

### 2.2 Out of Scope（明确不做）

- 同步/账号体系
- 提醒（通知）与重复任务
- 团队协作
- 与日历的双向集成

## 3. 用户故事（User Stories）

1. 作为用户，我能随时把任务快速丢进 Inbox，之后再整理。
2. 作为用户，我能把任务分配到项目，并在项目里维护清单。
3. 作为用户，我能每天在 Today 里安排要做的事，并按优先顺序排序。
4. 作为用户，我能在 Upcoming 里看到未来的计划任务。
5. 作为用户，我能在 Logbook 里回顾已完成内容。
6. 作为用户，我能导出数据，并在另一台设备上导入恢复。

## 4. 功能需求与验收标准

### 4.1 Task 基础能力（P0）

- 新建任务
  - 验收: 任务标题必填; 创建后默认进入 Inbox。
- 编辑任务
  - 字段: title, notes（Markdown 文本）, scheduled_at, due_at, project, tags
  - 验收: 修改后在对应列表即时反映; 不出现数据错乱。
- 完成/取消任务
  - 验收: 完成后从当前列表消失，进入 Logbook; 取消行为可被过滤/隐藏（具体展示策略由实现决定，但必须可追溯）。

### 4.2 Inbox（P0）

- Inbox 展示所有“未归属/未整理”的任务
  - 验收: 新建任务默认进入 Inbox; 将任务分配到项目/设置计划日期后，任务可从 Inbox 移除（按产品规则）。

### 4.3 Today（P0）

- Today 规则
  - 建议规则: scheduled_at <= 今日 且未完成的任务出现; 同时允许用户手动把任务放入 Today（可通过设置 scheduled_at=今日实现）。
  - 验收: 今日到来时任务可见; 用户可将任务安排到今天。
- 排序
  - 验收: Today 支持手动拖拽/快捷键移动排序; 重新启动后顺序保持。

### 4.4 Upcoming（P0）

- 按 scheduled_at 浏览未来任务
  - 验收: 至少支持“按天”分组浏览; 能看到今天之后的任务。

### 4.5 Anytime / Someday（P0）

- Anytime
  - 定义: 未完成且没有 scheduled_at 的任务（不含 Someday）。
  - 验收: 未设置计划日期的任务能在 Anytime 找到。
- Someday
  - 定义: 用户主动标记为“以后再做”的任务集合。
  - 验收: 任务可被标记/取消标记 Someday; Someday 中的任务默认不进入 Today。

### 4.6 Logbook（P0）

- 已完成任务的归档视图
  - 验收: 完成任务后可在 Logbook 按日期找到; 支持基础搜索。

### 4.7 Projects（P0）

- 创建/编辑项目
  - 验收: 项目有标题与可选备注; 项目可标记 active/on_hold/done（最简实现可先只有 active/done）。
- 项目内任务
  - 验收: 任务可归属项目; 项目内任务支持排序; 项目状态影响其可见性（例如 done 项目默认折叠/归档）。

### 4.8 Tags（P0）

- 创建/编辑标签
  - 验收: 标签可分配给任务; 同一任务可多标签。
- 基础过滤
  - 验收: 能在某个“标签视图”中看到所有带该标签的任务。

### 4.9 搜索（P0）

- 全局搜索
  - 范围: title + notes
  - 验收: 输入关键词可返回匹配任务; 支持按状态过滤（至少 open/done）。

### 4.10 导入/导出（P0）

- 导出 JSON
  - 验收: 一键导出包含 tasks/projects/tags/areas（如有）及其关系。
- 导入 JSON
  - 验收: 导入后数据完整可用; 不发生崩溃; 对重复导入有策略（例如提示覆盖/合并，具体实现可后置，但至少要有保护）。

## 5. 体验要求（本迭代）

- 键盘优先: 新建任务、完成任务、搜索、列表切换至少有基础快捷键。
- 性能: 1k 任务下操作无明显卡顿（先用较低门槛验收）。

## 6. 依赖与风险

- 存储方案尚未确定: 会影响排序持久化与导入导出结构。
- 信息架构规则需要明确: Inbox/Anytime/Someday/Today 的边界必须一致，否则用户会困惑。

## 7. 交付清单

- 核心列表全部可用
- Projects/Tags 可用
- 搜索可用
- JSON 导入/导出可用
